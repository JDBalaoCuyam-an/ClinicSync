<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Patient</title>
    <script type="module" src="../../firebaseconfig.js"></script>
    <link rel="stylesheet" href="../../assets/styles/ViewPatient.css" />
    <link rel="stylesheet" href="../../assets/styles/globalCSS.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
  </head>
  <body>
    <!-- NavBar -->
    <header class="navbar">
      <div class="container-fluid">
        <!-- LEFT SIDE ‚Äì Your exact menu icon + title -->
        <div class="left-header d-flex align-items-center">
          <!-- This is your original ‚ò∞ icon ‚Äì unchanged -->
          <div
            class="menu-icon text-white me-3"
            onclick="toggleSidebar()"
            style="font-size: 28px; cursor: pointer; padding: 0 10px"
          >
            &#9776;
          </div>
          <h1 class="mb-0 text-white fs-4 fw-bold">ClinicSync</h1>
        </div>

        <!-- RIGHT SIDE ‚Äì User info + logout (still responsive) -->
        <div class="right-header d-flex align-items-center gap-3">
          <div class="user-name text-white d-none d-sm-block" id="displayName">
            Dr. Juan Dela Cruz
          </div>

          <div
            class="rounded-circle"
            style="
              width: 40px;
              height: 40px;
              background-color: aliceblue;
              border: 2px solid rgba(255, 255, 255, 0.3);
            "
          ></div>

          <div class="logout-container">
            <form class="m-0">
              <button
                type="submit"
                id="logout-button"
                class="btn btn-link text-white p-0"
                title="Logout"
              >
                <i class="fa-solid fa-right-from-bracket fa-lg"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </header>

    <!-- SideBar -->
    <div id="sidebar-container"></div>
    <div id="overlay" class="overlay"></div>

    <div
      class="view-patient-controls"
      style="display: flex; justify-content: space-between; align-items: center"
    >
      <button id="back-to-lists" onclick="window.location.href='Patients.html'">
        Back
      </button>
      <h2></h2>
      <button id="exportPDF">Export PDF</button>
    </div>

    <div class="view-patient-container">
      <div class="left-container">
        <div class="patient-contacts card">
          <div
            class="card-header d-flex align-items-center justify-content-between"
          >
            <h5 class="mb-0">Contact Details</h5>

            <!-- Buttons container -->
            <div class="d-flex align-items-center gap-2">
              <button
                id="edit-contacts"
                class="btn btn-primary btn-sm"
                type="button"
              >
                ‚úèÔ∏è Edit
              </button>

              <button
                id="cancel-contact-edit-btn"
                class="btn btn-outline-danger btn-sm"
                type="button"
                style="display: none"
              >
                ‚ùå Cancel
              </button>
            </div>
          </div>

          <div class="card-body">
            <div class="mb-3">
              <label class="form-label">Phone Number</label>
              <input
                type="text"
                id="phone-number"
                class="form-control"
                placeholder="Phone Number"
                disabled
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Email Address</label>
              <input
                type="email"
                id="email-address"
                class="form-control"
                placeholder="Email Address"
                disabled
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Home Address</label>
              <input
                type="text"
                id="home-address"
                class="form-control"
                placeholder="Home Address"
                disabled
              />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Guardian's Name</label>
                <input
                  type="text"
                  id="guardian-name"
                  class="form-control"
                  placeholder="Guardian's Name"
                  disabled
                />
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">Guardian's Contact</label>
                <input
                  type="text"
                  id="guardian-phone"
                  class="form-control"
                  placeholder="Guardian's Phone Number"
                  disabled
                />
              </div>
            </div>
          </div>
        </div>

        <!-- Document Files -->
        <div class="patient-documents">
          <h3>Documents :</h3>

          <button class="upload-btn" id="upload-btn">Upload Files</button>
          <input type="file" id="file-input" style="display: none" />

          <div class="category-section">
            <button class="category-toggle">Laboratory ‚ñº</button>
            <ul class="documents-list" id="lab-list" style="display: none"></ul>
          </div>

          <div class="category-section">
            <button class="category-toggle">Radiology ‚ñº</button>
            <ul class="documents-list" id="rad-list" style="display: none"></ul>
          </div>

          <div class="category-section">
            <button class="category-toggle">Others ‚ñº</button>
            <ul
              class="documents-list"
              id="others-list"
              style="display: none"
            ></ul>
          </div>
        </div>
        <div class="upload-select-category">
          <h3>Select Document Category:</h3>
          <select id="document-category">
            <option value="Laboratory">Laboratory</option>
            <option value="Radiology">Radiology</option>
            <option value="Others">Others</option>
          </select>
          <button id="confirm-upload-btn">Upload</button>
          <button id="cancel-upload-btn">Cancel</button>
        </div>
      </div>
      <!-- Patient Records -->
      <div class="right-container">
        <div class="patient-records">
          <!-- Tabs -->
          <input type="radio" id="patient-info" name="tab" checked />
          <label class="radio-tabs" for="patient-info">Patient Info</label>

          <input type="radio" id="medical-history" name="tab" />
          <label class="radio-tabs" for="medical-history"
            >Medical History</label
          >

          <input type="radio" id="medical-consultation" name="tab" />
          <label class="radio-tabs" for="medical-consultation"
            >Medical Consultation Records</label
          >

          <input type="radio" id="physical-examination" name="tab" />
          <label class="radio-tabs" for="physical-examination"
            >Physical Examination</label
          >

          <input type="radio" id="vital-signs" name="tab" />
          <label class="radio-tabs" for="vital-signs">Vital Signs</label>

          <input type="radio" id="doctor-notes" name="tab" />
          <label class="radio-tabs" for="doctor-notes">Doctor's Notes</label>

          <input type="radio" id="nurse-notes" name="tab" />
          <label class="radio-tabs" for="nurse-notes">Nurse's Notes</label>

          <!-- Tab Contents -->
          <div class="tab-content patient-info-content">
            <div class="header-row">
              <h2>Patient Information</h2>
              <button class="edit-btn">‚úèÔ∏è Edit</button>
              <button
                id="cancelPatientInfoBtn"
                style="display: none; margin-top: 10px"
              >
                ‚ùå Cancel
              </button>
            </div>

            <div class="info-grid">
              <label
                >Last Name : <input id="lastName" type="text" disabled
              /></label>
              <label
                >First Name : <input id="firstName" type="text" disabled
              /></label>
              <label
                >Middle Name : <input id="middleName" type="text" disabled
              /></label>
              <label
                >Ext. Name : <input id="extName" type="text" disabled
              /></label>
              <label
                >Gender :
                <select id="gender" disabled>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select></label
              >
              <label
                >Birthdate : <input id="birthdate" type="date" disabled
              /></label>
              <label>Age : <input id="age" type="number" disabled /></label>
              <label
                >Civil Status : <input id="civilStatus" type="text" disabled
              /></label>
              <label
                >Nationality : <input id="nationality" type="text" disabled
              /></label>
              <label
                >Religion : <input id="religion" type="text" disabled
              /></label>

              <label
                >School ID : <input id="schoolId" type="text" disabled
              /></label>
              <label>
                Department :
                <select id="department" disabled required>
                  <option value="">Select Department</option>
                  <option value="CABM">CABM</option>
                  <option value="CCJE">CCJE</option>
                  <option value="CIT">CIT</option>
                  <option value="COT">COT</option>
                  <option value="TTED">TTED</option>
                  <option value="CTE">CTE</option>
                  <option value="BasicEd">BasicEd</option>
                  <option value="Visitor">Visitor</option>
                </select>
              </label>

              <label>
                Course/Strand/Gen. Educ. :
                <select id="course" disabled>
                  <option value="">Select Course / Strand</option>
                  <option value="Bachelor of Science in Accountancy">
                    Bachelor of Science in Accountancy
                  </option>
                  <option value="Bachelor of Science in Hospitality Management">
                    Bachelor of Science in Hospitality Management
                  </option>
                  <option value="Bachelor of Science in Information Technology">
                    Bachelor of Science in Information Technology
                  </option>
                  <option value="Bachelor of Science in Office Administration">
                    Bachelor of Science in Office Administration
                  </option>
                  <option
                    value="Bachelor of Science in Business Administration"
                  >
                    Bachelor of Science in Business Administration
                  </option>
                  <option value="Bachelor of Elementary Education">
                    Bachelor of Elementary Education
                  </option>
                  <option value="Bachelor of Science in Psychology">
                    Bachelor of Science in Psychology
                  </option>
                  <option value="Bachelor of Science in Social Work">
                    Bachelor of Science in Social Work
                  </option>
                  <option value="Bachelor of Secondary Education">
                    Bachelor of Secondary Education
                  </option>
                  <option value="Technical Vocational Teacher Education">
                    Technical Vocational Teacher Education
                  </option>
                  <option value="Bachelor of Science in Criminology">
                    Bachelor of Science in Criminology
                  </option>
                  <option value="NC1 NC2 NC3">NC1 NC2 NC3</option>
                  <option value="Bachelor of Theology">
                    Bachelor of Theology
                  </option>
                  <option value="Accountancy and Business Management">
                    Accountancy and Business Management (ABM)
                  </option>
                  <option
                    value="Science, Technology, Engineering, and Mathematics"
                  >
                    Science, Technology, Engineering, and Mathematics (STEM)
                  </option>
                  <option value="Humanities and Sciences">
                    Humanities and Sciences
                  </option>
                  <option value="Junior Highschool">Junior Highschool</option>
                  <option value="Elementary">Elementary</option>
                  <option value="Kindergarten">Kindergarten</option>
                  <option value="Visitor">Visitor</option>
                </select>
              </label>

              <label
                >Year Level : <input id="year" type="number" disabled
              /></label>
            </div>

            <br />
            <hr />
            <br />

            <h3>Parent‚Äôs Information</h3>
            <div class="info-grid" id="parent-info-grid">
              <label
                >Father‚Äôs Name : <input id="fatherName" type="text" disabled
              /></label>
              <label
                >Father's Age : <input id="fatherAge" type="number" disabled
              /></label>
              <label
                >Father's Occupation :
                <input id="fatherOccupation" type="text" disabled
              /></label>
              <label
                >Father's Health Status :
                <input id="fatherHealth" type="text" disabled
              /></label>

              <label
                >Mother‚Äôs Name : <input id="motherName" type="text" disabled
              /></label>
              <label
                >Mother's Age : <input id="motherAge" type="number" disabled
              /></label>
              <label
                >Mother's Occupation :
                <input id="motherOccupation" type="text" disabled
              /></label>
              <label
                >Mother's Health Status :
                <input id="motherHealth" type="text" disabled
              /></label>
            </div>
          </div>

          <div class="tab-content medical-history-content">
            <div class="header-row">
              <h2>Medical History :</h2>
              <button class="edit-btn">‚úèÔ∏è Edit</button>
              <button
                id="cancelHistoryBtn"
                style="display: none; margin-top: 10px"
              >
                ‚ùå Cancel
              </button>
            </div>

            <div class="history-grid">
              <div class="history-card">
                <h3>Past Medical History</h3>
                <textarea disabled>---</textarea>
              </div>

              <div class="history-card">
                <h3>Family History</h3>
                <textarea disabled>---</textarea>
              </div>

              <div class="history-card">
                <h3>Past Surgical History</h3>
                <textarea disabled></textarea>
              </div>
            </div>
            <!-- end of history-grid -->

            <!-- Additional Medical Info Section -->
            <div class="additional-info">
              <div class="history-card">
                <h3>Nutritional Supplements / Vitamins / Other Medications</h3>
                <textarea
                  disabled
                  placeholder="Enter details here..."
                ></textarea>
              </div>

              <div class="history-card">
                <h3>Allergies</h3>
                <textarea
                  disabled
                  placeholder="List allergies here..."
                ></textarea>
              </div>

              <!-- üîπ Immunization Section -->
              <div class="history-card immunization-card">
                <h3>Immunization</h3>
                <div class="immunization-form">
                  <div class="immunization-row">
                    <label>BCG:</label
                    ><input name="bcg" type="text" disabled />
                    <label>DPT:</label
                    ><input name="dpt" type="text" disabled />
                    <label>OPV:</label><input name="opv" type="text" disabled />
                  </div>
                  <div class="immunization-row">
                    <label>HEP. B:</label
                    ><input name="hepb" type="text" disabled />
                    <label>MMR:</label
                    ><input name="mmr" type="text" disabled />
                    <label>MEASLES:</label
                    ><input name="measles" type="text" disabled />
                  </div>
                  <div class="immunization-row">
                    <label>OTHERS:</label
                    ><input
                      type="text"
                      name="others"
                      disabled
                      style="flex: 1"
                    />
                  </div>
                </div>
              </div>

              <!-- üîπ OB-GYNE History Section -->
              <div class="history-card obgyne-card">
                <h3>OB-GYNE History (Female Only)</h3>
                <div class="obgyne-form">
                  <div class="ob-row">
                    <label>Age of First Menstrual Period:</label>
                    <input type="text" name="menarcheAge" disabled />
                  </div>

                  <div class="ob-row">
                    <label>Duration/Days:</label>
                    <input type="text" name="durationDays" disabled />
                    <label>Napkin/s per Day:</label>
                    <input type="text" name="napkinsPerDay" disabled />
                    <label>Interval:</label>
                    <input type="text" name="interval" disabled />
                  </div>

                  <div class="ob-row dysmenorrhea-row">
                    <label>Dysmenorrhea:</label>
                    <div class="radio-group">
                      <label
                        ><input
                          type="radio"
                          name="dysmenorrhea"
                          value="No"
                          disabled
                        />
                        No</label
                      >
                      <label
                        ><input
                          type="radio"
                          name="dysmenorrhea"
                          value="Sometimes"
                          disabled
                        />
                        Sometimes</label
                      >
                      <label
                        ><input
                          type="radio"
                          name="dysmenorrhea"
                          value="Moderate"
                          disabled
                        />
                        Moderate</label
                      >
                      <label
                        ><input
                          type="radio"
                          name="dysmenorrhea"
                          value="Severe"
                          disabled
                        />
                        Severe</label
                      >
                    </div>
                  </div>

                  <div class="ob-row">
                    <label>Last Menstrual:</label>
                    <input type="date" name="lastMenstrual" disabled />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content medical-consultation-content">
            <h2>Medical Consultation Records :</h2>

            <button onclick="addConsultationRecordOverlay()" class="new-btn">
              + New
            </button>

            <div class="table-responsive">
              <table
                class="table table-striped table-bordered table-hover align-middle"
              >
                <thead class="table-primary">
                  <tr>
                    <th>Cons. Dr.</th>
                    <th>NoD</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Chief Complaint</th>
                    <th>Diagnosis</th>
                    <th>Meds.</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Data will load here -->
                </tbody>
              </table>
            </div>
            <div class="mt-4">
              <a
                class="text-decoration-none"
                data-bs-toggle="collapse"
                href="#actionHistory"
                role="button"
                aria-expanded="true"
                aria-controls="actionHistory"
              >
                <h5
                  class="fw-bold mb-0 p-2 bg-light rounded d-flex justify-content-between align-items-center"
                >
                  Action History
                  <span
                    id="medical-consultation-logs-count"
                    class="badge bg-primary rounded-pill"
                    >0</span
                  >
                </h5>
              </a>

              <div class="collapse show mt-2" id="actionHistory">
                <ul id="action-history" class="list-group">
                  <li class="list-group-item text-muted">No actions yet</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- New Consultation Record -->
          <div id="add-consultation-record">
            <h2>New Consultation Record</h2>

            <form id="consultation-form">
              <label>
                Consulting Doctor:
                <select id="consult-doctor" class="form-control">
                  <option value="">Select Doctor</option>
                </select>
              </label>
              <label
                >Date:<input type="date" id="consult-date" required
              /></label>
              <label
                >Time:<input type="time" id="consult-time" required
              /></label>
              <label>Chief Complaint:</label>
              <select id="consult-complaint" class="form-control mb-2">
                <option value="">Select Complaint</option>
                <option value="__add_new__">‚ûï Add New Complaint</option>
              </select>

              <!-- Hidden new complaint input -->
              <input
                type="text"
                id="new-complaint-input"
                class="form-control mt-2"
                placeholder="Enter new complaint"
                style="display: none"
              />

              <label>Diagnosis:</label>
              <select id="consult-diagnosis" class="form-control mb-2">
                <option value="">Select Diagnosis</option>
                <option value="__add_new__">‚ûï Add New Diagnosis</option>
              </select>

              <!-- Hidden new diagnosis input -->
              <input
                type="text"
                id="new-diagnosis-input"
                class="form-control mt-2"
                placeholder="Enter new diagnosis"
                style="display: none"
              />

              <label>Medications Dispensed:</label>
              <div id="meds-list"></div>
              <button type="button" id="add-med-btn">+ Add Medicine</button>

              <label for="consult-notes">Notes/Intervention:</label>
              <textarea
                id="consult-notes"
                placeholder="Enter consultation notes here..."
              ></textarea>

              <button type="submit" class="save-btn">Save</button>
            </form>
            <button
              style="
                padding: 6px 8px;
                font-size: 14px;
                border: 1px solid black;
                border-radius: 4px;
                margin-top: 3px;
                width: 100%;
              "
              onclick="closeButtonOverlay()"
            >
              Cancel
            </button>
          </div>
          <div id="consultation-overview" class="consultation-modal">
            <div class="modal-content">
              <h2>Consultation Overview</h2>

              <div class="overview-details">
                <label
                  ><strong>Doctor:</strong>
                  <input id="ovr-doctor" type="text" disabled />
                </label>

                <label
                  ><strong>Date:</strong>
                  <input id="ovr-date" type="date" disabled />
                </label>

                <label
                  ><strong>Time:</strong>
                  <input id="ovr-time" type="time" disabled />
                </label>

                <label
                  ><strong>Chief Complaint:</strong>
                  <input id="ovr-complaint" type="text" disabled />
                </label>

                <label
                  ><strong>Diagnosis:</strong>
                  <input id="ovr-diagnosis" type="text" disabled />
                </label>

                <label
                  ><strong>Notes/Intervention:</strong>
                  <textarea id="ovr-notes" disabled></textarea>
                </label>
              </div>
              <div class="meds-header">
                <h4 class="mt-3 fw-bold">Medications</h4>
                <button id="addMedBtn" style="display: none">‚ûï Add Med</button>
              </div>

              <table id="cons-meds-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Qty</th>
                    <th>Date / Time</th>
                    <th>Personnel Incharge</th>
                    <th>Type</th>
                    <th>Remarks</th>
                  </tr>
                </thead>
                <tbody id="cons-meds-list"></tbody>
              </table>

              <div class="modal-buttons">
                <button style="background-color: #95a5a6; display: none">
                  Cancel
                </button>
                <button id="editOverviewBtn">‚úèÔ∏è Edit</button>
                <button onclick="closeButtonOverlay()">Close</button>
              </div>
              <!-- ‚úÖ ADD MEDICATION SELECTION MODAL -->
              <div id="selectMedModal" class="modal" style="display: none">
                <div class="med-modal-content" style="max-width: 400px">
                  <h3>Select Medicines</h3>
                  <label><strong>Medicines:</strong></label>
                  <select
                    id="medSelect"
                    multiple
                    size="8"
                    style="width: 100%"
                  ></select>

                  <div style="margin-top: 10px">
                    <button id="selectMedNextBtn">Next</button>
                    <button onclick="closeSelectMedModal()">Cancel</button>
                  </div>
                </div>
              </div>

              <!-- ‚úÖ NEW: Quantity + Remarks Modal -->
              <div id="medDetailsModal" class="modal" style="display: none">
                <div class="med-modal-content" style="max-width: 500px">
                  <h3>Enter Quantity & Remarks</h3>

                  <div id="medDetailsContainer"></div>

                  <div style="margin-top: 15px">
                    <button id="saveMedDetailsBtn">Save</button>
                    <button onclick="closeMedDetailsModal()">Cancel</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content physical-examination-content">
            <h2>Physical Examination :</h2>

            <button onclick="addPhysicalExamOverlay()" class="new-btn">
              + New
            </button>

            <div class="table-responsive">
              <table
                class="table table-bordered table-striped align-middle text-center"
              >
                <thead class="table-primary">
                  <tr>
                    <th>Date</th>
                    <th>BP</th>
                    <th>PR</th>
                    <th>Weight (kg)</th>
                    <th>Height (cm)</th>
                    <th>BMI</th>
                    <th>BMI Category</th>
                  </tr>
                </thead>

                <tbody id="physical-exam-list">
                  <!-- Records will load here -->
                </tbody>
              </table>
            </div>

            <div id="add-physical-exam">
              <h2>Physical Examination</h2>

              <p>
                <em><strong>TO BE FILLED OUT BY CLINIC PERSONNEL</strong></em>
              </p>
              <p><em>PHYSICAL EXAMINATION</em></p>

              <form id="physical-exam-form">
                <div class="vitals">
                  <label
                    >Date: <input type="date" id="exam-date" required
                  /></label>
                  <label
                    >BP: <input type="text" id="exam-bp" placeholder="120/80"
                  /></label>
                  <label
                    >PR: <input type="text" id="exam-pr" placeholder="75"
                  /></label>
                  <label
                    >Weight (kg): <input type="number" id="exam-weight"
                  /></label>
                  <label
                    >Height (cm): <input type="number" id="exam-height"
                  /></label>
                  <label
                    >BMI: <input type="number" id="exam-bmi" step="0.1"
                  /></label>
                  <label
                    >Visual Acuity (OS): <input type="text" id="exam-visual-os"
                  /></label>
                  <label>OD: <input type="text" id="exam-visual-od" /></label>
                  <label
                    >With Glasses: <input type="checkbox" id="exam-glasses"
                  /></label>
                </div>

                <div class="exam-section">
                  <div class="left-col">
                    <label>HEENT: <input type="text" id="exam-heent" /></label>
                    <label>TEETH: <input type="text" id="exam-teeth" /></label>
                    <label>NECK: <input type="text" id="exam-neck" /></label>
                    <label>CHEST: <input type="text" id="exam-chest" /></label>
                    <label>LUNGS: <input type="text" id="exam-lungs" /></label>
                    <label>HEART: <input type="text" id="exam-heart" /></label>
                    <label
                      >BREAST: <input type="text" id="exam-breast"
                    /></label>
                    <label>SKIN: <input type="text" id="exam-skin" /></label>
                    <label
                      >ABDOMEN: <input type="text" id="exam-abdomen"
                    /></label>
                  </div>

                  <div class="right-col">
                    <label
                      >BACK/FLANKS: <input type="text" id="exam-back"
                    /></label>
                    <label
                      >ANUS/RECTUM: <input type="text" id="exam-anus"
                    /></label>
                    <label
                      >GENITALIA: <input type="text" id="exam-genitalia"
                    /></label>
                    <label
                      >EXTREMITIES: <input type="text" id="exam-extremities"
                    /></label>
                    <label
                      >CLEANLINESS (Nails, Hair, Ears):
                      <input type="text" id="exam-cleanliness"
                    /></label>
                    <label
                      >POSTURE: <input type="text" id="exam-posture"
                    /></label>
                    <label
                      >NUTRITION: <input type="text" id="exam-nutrition"
                    /></label>
                    <label
                      >DEFORMITY: <input type="text" id="exam-deformity"
                    /></label>
                    <label
                      >OTHERS: <input type="text" id="exam-others"
                    /></label>
                  </div>
                </div>

                <h4>Laboratory and Ancillary Procedure</h4>
                <label
                  >Present: <input type="text" id="exam-lab-present"
                /></label>
                <label
                  >Recommendations:
                  <input type="text" id="exam-recommendations"
                /></label>

                <div class="form-buttons">
                  <button type="submit" class="save-btn">Save</button>
                  <button type="button" onclick="closeButtonOverlay()">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
            <!-- üîπ PHYSICAL EXAM OVERVIEW MODAL -->
            <!-- üîπ PHYSICAL EXAM OVERVIEW MODAL -->
            <div id="exam-overview-modal" class="exam-overview-modal">
              <div class="modal-content">
                <h2>Physical Examination Overview</h2>
                <div class="overview-details">
                  <label
                    ><strong>Date:</strong>
                    <input id="ovr-exam-date" type="date" disabled />
                  </label>
                  <label
                    ><strong>BP:</strong>
                    <input id="ovr-exam-bp" type="text" disabled />
                  </label>
                  <label
                    ><strong>PR:</strong>
                    <input id="ovr-exam-pr" type="text" disabled />
                  </label>
                  <label
                    ><strong>Weight (kg):</strong>
                    <input
                      id="ovr-exam-weight"
                      type="number"
                      step="0.1"
                      disabled
                    />
                  </label>
                  <label
                    ><strong>Height (cm):</strong>
                    <input
                      id="ovr-exam-height"
                      type="number"
                      step="0.1"
                      disabled
                    />
                  </label>
                  <label
                    ><strong>BMI:</strong>
                    <input
                      id="ovr-exam-bmi"
                      type="number"
                      step="0.1"
                      disabled
                    />
                  </label>

                  <h4>üëÅÔ∏è Visual Acuity</h4>
                  <label
                    ><strong>OS:</strong>
                    <input id="ovr-exam-os" type="text" disabled />
                  </label>
                  <label
                    ><strong>OD:</strong>
                    <input id="ovr-exam-od" type="text" disabled />
                  </label>
                  <label
                    ><strong>Glasses:</strong>
                    <select id="ovr-exam-glasses" disabled>
                      <option value="true">Yes</option>
                      <option value="false">No</option>
                    </select>
                  </label>

                  <h4>ü©∫ Physical Findings</h4>
                  <div class="findings-box">
                    <textarea
                      id="ovr-exam-findings"
                      placeholder="Enter findings..."
                      disabled
                    ></textarea>
                  </div>
                  <input type="hidden" id="ovr-exam-findings-raw" />
                  <h4>üß™ Laboratory & Recommendations</h4>
                  <label
                    ><strong>Laboratory Procedure:</strong>
                    <input id="ovr-exam-lab" type="text" disabled />
                  </label>
                  <label
                    ><strong>Recommendations:</strong>
                    <textarea id="ovr-exam-recommendations" disabled></textarea>
                  </label>
                </div>

                <div class="modal-buttons">
                  <button id="editExamBtn">‚úèÔ∏è Edit</button>
                  <button onclick="closeButtonOverlay()">Close</button>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-content vital-signs-content"></div>
          <div class="tab-content doctor-notes-content"></div>
          <div class="tab-content nurse-notes-content"></div>
        </div>
      </div>
    </div>
    <div id="footer-container"></div>
  </body>
  <script src="../../assets/scripts/modal.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script src="../../assets/scripts/ViewPatient.js" type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Wait for the DOM to fully load
    document.addEventListener("DOMContentLoaded", () => {
      // Select the back-to-top button
      const backToTopBtn = document.querySelector(".backToTop");

      // Check if button exists (important if footer is dynamically imported)
      if (backToTopBtn) {
        // Scroll smoothly to top when clicked
        backToTopBtn.addEventListener("click", () => {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });

        // Optional: Show/hide button based on scroll position
        window.addEventListener("scroll", () => {
          if (window.scrollY > 300) {
            backToTopBtn.style.display = "block"; // Show button
          } else {
            backToTopBtn.style.display = "none"; // Hide button
          }
        });

        // Initially hide the button
        backToTopBtn.style.display = "none";
      }
    });
  </script>
</html>
